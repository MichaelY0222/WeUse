<view class="page">
  <image src="../../icons/logo.svg" class="weUseLogo"></image>
  <text hidden="{{!showDebugInfo}}">pages/me/me.wxml</text>

  <view class="heading">
    <text>æˆ‘çš„è´¦å·</text>
    <image src="../../icons/scan.svg" class="iconscan" bindtap="scan"></image>
  </view>

  <view class="spacelast"></view>

  <view wx:if="{{!needRegistration}}">
    <!-- Profile Info -->
    <!-- <view class="profileBox">
      <image src="{{avatarUrl}}" class="avatar"></image>
      <view class="nameBadge">
        <text class="nickname">{{nickName}}</text>
        <text class="tag">å­¦ç”Ÿ</text>
      </view>
      <view class="verifiedBadge">
        <image src="../../icons/check.png" class="checkIcon"></image>
        <text>åˆæ ¼</text>
      </view>
    </view> -->

    <!-- Editable fields -->
    <!-- <view class="inputField">
      <input value="{{chiName}}" placeholder="å§“å" />
      <image src="../../icons/edit.png" class="editIcon"></image>
    </view>

    <view class="inputField">
      <input value="{{grades}}" placeholder="å¹´çº§ (å¯å¤šé€‰)" />
      <image src="../../icons/edit.png" class="editIcon"></image>
    </view> -->

    <!-- Locked fields (WeChat, phone, ID) -->
    <!-- <view class="inputField disabled">
      <input value="{{wechatId}}" placeholder="å¾®ä¿¡å·" disabled />
      <image src="../../icons/edit.png" class="editIcon"></image>
    </view>

    <view class="inputField disabled">
      <input value="{{phone}}" placeholder="æ‰‹æœºå· (11 digits ONLY)" disabled />
      <image src="../../icons/edit.png" class="editIcon"></image>
    </view>

    <view class="inputField disabled">
      <input value="{{studentId}}" placeholder="å­¦ç”Ÿ G å·" disabled />
      <image src="../../icons/edit.png" class="editIcon"></image>
    </view> -->

    <!-- Counters -->
    <view class="statsSection">
      <view class="statRow">
        <text>å‘å¸ƒçš„ç‰©å“ ({{postedCount}})</text>
        <button class="viewBtn" bindtap="viewPosted">æŸ¥çœ‹</button>
      </view>
      <view class="statRow">
        <text>å–æ‰çš„ç‰©å“ ({{soldCount}})</text>
        <button class="viewBtn" bindtap="viewSold">æŸ¥çœ‹</button>
      </view>
      <view class="statRow">
        <text>å¾—åˆ°çš„ç‰©å“ ({{receivedCount}})</text>
        <button class="viewBtn" bindtap="viewReceived">æŸ¥çœ‹</button>
      </view>
    </view>

    <!-- Favorites table -->
    <view class="favoritesSection">
      <view class="favHeader">
        <image src="../../icons/star.png" class="starIcon"></image>
        <text>æˆ‘æ”¶è—çš„ç‰©å“</text>
      </view>

      <view class="tableHeader">
        <text class="colName">ç‰©å“åç§°</text>
        <text class="colSeller">å–å®¶</text>
        <text class="colStatus">çŠ¶å†µ</text>
        <text class="colAction">æ›´å¤š</text>
      </view>

      <block wx:for="{{favoritesList}}" wx:key="id">
        <view class="tableRow">
          <text class="colName">{{item.name}}</text>
          <view class="colSeller">
            <image src="{{item.seller.avatar}}" class="avatarMini" />
            <text>{{item.seller.name}}</text>
            <text class="roleTag">{{item.seller.role}}</text>
          </view>
          <text class="colStatus">{{item.status}}</text>
          <view class="colAction">
            <button class="viewBtn">ğŸ‘ï¸</button>
            <button class="removeBtn">âŒ</button>
          </view>
        </view>
      </block>
    </view>
  </view>

  <!-- Unregistered message -->
  <view wx:else class="container">
    <image src="../../icons/lock.png" class="lockIcon"></image>
    <text class="subheading">ä½¿ç”¨æ­¤æœåŠ¡éœ€è¦å…ˆæ³¨å†Œ</text>
    <view class="spacelast"></view>
    <button class="button" bindtap="guestLogin">ç°åœ¨æ³¨å†Œ</button>
  </view>

  <view id="main-menu-footer">
    <text class="main-menu-registration-information" wx:if="{{!needRegistration}}">
      æ‚¨å·²æ³¨å†Œä¸º {{studentId}} {{chiName}}
    </text>
    <view id="version-footer" bindtap="adminOverride">ç‰ˆæœ¬ 1.0.0</view>
  </view>
</view>